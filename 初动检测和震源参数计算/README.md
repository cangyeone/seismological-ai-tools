### 地震震源参数计算（通过初动）
基于hashpy程序，即HASH1.2编译的Python版程序。

### 训练和测试
#### 训练
训练程序较为简单，直接运行ploar.train.py即可，网络输入为1024采样点的Z分量波形，输出为初动方向和初动质量。但是初动质量并不准确。 
训练数据使用[H5文件制作](https://github.com/cangyeone/seismological-ai-tools/tree/main/MSEED%E6%96%87%E4%BB%B6%E7%B4%A2%E5%BC%95%E5%92%8CH5%E5%88%B6%E4%BD%9C)来制作训练数据。

#### 测试
测试数据统计参数为查全率和查准率等信息。其结构与训练类似。

#### 关于三分量数据
初动检测可以使用单分量和三分量波形数据，但是测试中发现二者精度区别不大，因此建议使用单一Z分量波形。



### 基于P波初动对震源参数进行计算
通过P波初动进行震源参数计算包含三个程序：
1. 震相拾取程序。使用目前精度最高的RNN模型拾取地震P波。已经制作为jit模型。
2. 初动判断程序。使用训练的初动计算程序判断P波初动方向。使用make.jit.py制作jit模型
3. HASH计算初动。使用hashpy程序所包含的二进制库。

在计算之前需要的处理包括：
1. 波形数据需要使用三分量的mseed格式数据。
2. 数据需要制作mseed索引数据库，用于方便的从数据库中截取数据。
3. 计算震源参数程序使用focal-mechnisms.py，代码中有注释可以根据需要修改。

处理过程中的方便之处是:
1. 无需人工标注P波，仅需给定地震位置和时间以及台站位置便可以自动拾取P波。
2. 无需标注初动，由第一步截取并自动判断。
3. 自动初动质量判断，基于输出置信度进行判断。
